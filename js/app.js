!function(){"use strict";angular.module("emus",["emus.routes","emus.landing","emus.about","emus.modalities","emus.modalities.type","emus.modality.factory","emus.modality.more.directive","emus.modality.hide.directive","emus.form","emus.summary","emus.modal.controller","emus.form.factory","emus.form.factory.mun","emus.form.directives","duScroll","ncy-angular-breadcrumb","ngAnimate","ui.bootstrap","nya.bootstrap.select","angularUtils.directives.uiBreadcrumbs","akoenig.deckgrid","ngActivityIndicator"]).value("duScrollDuration",750).run(["$rootScope","$state","$stateParams",function(e,o,a){return e.$state=o,e.$stateParams=a,e.$on("$stateChangeStart",function(o,a){return e.title=a.data.title,e.title}),e.$on("$stateChangeSuccess",function(o){return e.state=o.targetScope.$state.current,e.state}),e}]).config(["$modalProvider",function(e){e.options.animation=!0}])}(),function(){"use strict";angular.module("emus.routes",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,o){o.otherwise("/"),e.state("inicio",{url:"/",controller:"LandingController",templateUrl:"./components/landing/landing.html",data:{title:""},ncyBreadcrumb:{label:"Inicio"}}).state("modalidades",{url:"/modalidades",controller:"ModalitiesController",data:{title:"Modalidades de la Estrategia de Movilidad Urbana Sustentable (EMUS)"},templateUrl:"./components/modalities/modalities.html",ncyBreadcrumb:{label:"Modalidades",parent:"inicio"}}).state("modalidades.tipo",{url:"/:tipo",controller:"ModalityTypeController",templateUrl:"./components/modalities/type/template.html",ncyBreadcrumb:{label:"Modalidades",parent:"inicio"}}).state("modalidades.calculadora",{"abstract":!0,url:"/calculadora",templateUrl:"./components/calculator/calculator.html"}).state("modalidades.calculadora.formulario",{url:"/formulario",templateUrl:"./components/calculator/form/form.html",controller:"FormController",data:{title:"Calculadora"},ncyBreadcrumb:{label:"Calculadora",parent:"modalidades.calculadora"}}).state("modalidades.calculadora.resumen",{url:"/resumen",templateUrl:"./components/calculator/summary/summary.html",controller:"SummaryController",data:{title:"Resumen"},ncyBreadcrumb:{label:"Resumen",parent:"modalidades.calculadora.formulario"}}).state("acerca",{url:"/acerca",templateUrl:"./components/about/about.html",controller:"AboutController",data:{title:"Acerca de EMUS"},ncyBreadcrumb:{label:"Acerca de EMUS",parent:"inicio"}})}])}(),function(){"use strict";var e=function(e,o){o.scrollTop(0);var a=angular.element(document.getElementById("menu")),l=angular.element(document.getElementsByClassName("about-menu"));a.on("click",function(e){e.preventDefault(),l.toggleClass("show_menu")}),o.on("scroll",function(){var e=angular.element(document.getElementById("header"));o.scrollTop()>=65?e.addClass("black"):e.removeClass("black")})};e.$inject=["$scope","$document"],angular.module("emus.about",[]).controller("AboutController",e)}(),function(){"use strict";var e=function(e,o){o.scrollTop(0);var a=angular.element(document.getElementById("menu")),l=angular.element(document.getElementsByClassName("landing-menu"));a.on("click",function(e){e.preventDefault(),l.toggleClass("show_menu")}),o.on("scroll",function(){var e=angular.element(document.getElementById("header"));o.scrollTop()>=65?e.addClass("black"):e.removeClass("black")})};e.$inject=["$scope","$document"],angular.module("emus.landing",[]).controller("LandingController",e)}(),function(){"use strict";var e=function(e,o,a,l){var t,s;e.scrollTop(0),o.showModalities=function(){return"modalidades"===l.current.name||"modalidades.tipo"===l.current.name?!0:void 0},angular.element(a).bind("scroll",function(){t=angular.element(document.getElementById("header")),s=angular.element(document.getElementsByTagName("body")),s[0].scrollTop>=65&&s[0].scrollWidth>=768?t.addClass("black"):t.removeClass("black")})};e.$inject=["$document","$scope","$window","$state"],angular.module("emus.modalities",[]).controller("ModalitiesController",e)}(),function(){"use strict";var e=function(e,o,a,l,t,s,i,c,r,n,d,m,u,p){function f(){g(),r.info("Iniciando..."),null!==M&&(s.calculator=JSON.parse(M),"true"==$&&(s.flagPozos=!0,s.form.PozosProyecto1=s.calculator.PozosProyecto,s.calculator.PozosProyecto=s.form.PozosProyecto1,s.submitted=!0,s.pozos="d"),"false"==$&&(s.flagPozos=!1,s.form.PozosProyecto2=s.calculator.PozosProyecto,s.calculator.PozosProyecto=s.form.PozosProyecto2,s.submitted=!0,s.pozos="c",s.firstPozo=function(e){h(e)}),"true"==E&&(s.flagRejillas=!0,s.form.RejillasProyecto1=s.calculator.RejillasProyecto,s.calculator.RejillasProyecto=s.form.RejillasProyecto1,s.submitted=!0,s.rejillas="d"),"false"==E&&(s.flagRejillas=!1,s.form.RejillasProyecto2=s.calculator.RejillasProyecto,s.calculator.RejillasProyecto=s.form.RejillasProyecto2,s.submitted=!0,s.rejillas="c",s.firstRejilla=function(e){C(e)}),"true"==k&&(s.flagCocheras=!0,s.form.CocherasProyecto1=s.calculator.Cocheras,s.calculator.Cocheras=s.form.CocherasProyecto1,s.submitted=!0,s.cocheras="d"),"false"==k&&(s.flagCocheras=!1,s.form.CocherasProyecto2=s.calculator.Cocheras,s.calculator.Cocheras=s.form.CocherasProyecto2,s.submitted=!0,s.cocheras="c",s.firstCochera=function(e){z(e)}),"true"==T&&(s.flagBicie=!0,s.submitted=!0,s.biciestacionamiento="default"),"false"==T&&(s.flagBicie=!1,s.calc.bicie=s.calculator.Biciestacionamientos,s.calculator.Biciestacionamientos=s.calc.bicie,s.submitted=!0,s.biciestacionamiento="c",s.firstBiciE=function(e){A(e)})),O&&"true"===_?s.area=JSON.parse(O):"false"!==_&&b()}function g(){var e=!1;F?o(function(){e||(e=!0,q=angular.element(document.getElementById(F)),q.addClass("radio_active"))},1e3):e=!1}function b(){return r.warn("Lanzando Modal"),o(function(){a.open({controller:"ModalController",controllerAs:"modalCtrl",templateUrl:"./components/calculator/modal/modal.html",resolve:{area:function(){return s.area}}})},1500)}function v(e){q=angular.element(document.getElementById(e)),q.addClass("radio_active"),sessionStorage.setItem("currentInfrastructure",q[0].id)}function y(e){N=parseInt(1e3*s.calculator.KmEvaluables/200),s.form.PozosProyecto1=N,s.calculator.PozosProyecto=s.form.PozosProyecto1,s.tmPozos=s.form.PozosProyecto2,s.form.PozosProyecto2=null,sessionStorage.setItem("flagPozos",!0),s.flagPozos=!0}function h(e){s.form.PozosProyecto2=e,s.calculator.PozosProyecto=s.form.PozosProyecto2,s.tmPozos=s.form.PozosProyecto1,s.form.PozosProyecto1=null,sessionStorage.setItem("flagPozos",!1),s.flagPozos=!1}function P(e){U=parseInt(1e3*s.calculator.KmEvaluables/200),s.form.RejillasProyecto1=U,s.calculator.RejillasProyecto=s.form.RejillasProyecto1,s.tmRejillas=s.form.RejillasProyecto2,s.form.RejillasProyecto2=null,sessionStorage.setItem("flagRejillas",!0),s.flagRejillas=!0}function C(e){s.form.RejillasProyecto2=e,s.calculator.RejillasProyecto=s.form.RejillasProyecto2,s.tmRejillas=s.form.RejillasProyecto1,s.form.RejillasProyecto1=null,sessionStorage.setItem("flagRejillas",!1),s.flagRejillas=!1}function x(e){R=parseInt(25*s.calculator.KmEvaluables),s.form.CocherasProyecto1=R,s.calculator.Cocheras=s.form.CocherasProyecto1,s.tmCocheras=s.form.CocherasProyecto2,s.form.CocherasProyecto2=null,sessionStorage.setItem("flagCocheras",!0),s.flagCocheras=!0}function z(e){s.form.CocherasProyecto2=e,s.calculator.Cocheras=s.form.CocherasProyecto2,s.tmCocheras=s.form.CocherasProyecto1,s.form.CocherasProyecto1=null,sessionStorage.setItem("flagCocheras",!1),s.flagCocheras=!1}function S(){s.calculator.Biciestacionamientos="default",s.tmBicie=s.calc.bicie,s.calc.bicie=null,sessionStorage.setItem("flagBicie",!0),s.flagBicie=!0}function A(e){s.calc.bicie=e,s.calculator.Biciestacionamientos=e,sessionStorage.setItem("flagBicie",!1),s.flagBicie=!1}function j(){function e(e,o){D={};for(var a in e)D[a]=e[a];for(var a in o)D[a]=o[a];return D}var o=JSON.parse(sessionStorage.getItem("area")),a=JSON.parse(sessionStorage.getItem("setQuote"));return w=e(o,a),G(w)}e.scrollTop(0);var R,I,w,T,k,$,E,B,F,O,M,_,q,D,N,L,U,K,J,Q,H=(u.$state.current.name,[]);s.calculator={},s.form={},s.calc={},s.area={estado:"",municipio:""},s.form.PozosProyecto1="",s.form.PozosProyecto2="",s.form.RejillasProyecto1="",s.form.RejillasProyecto2="",s.form.CocherasProyecto1="",s.form.CocherasProyecto2="",s.biciestacionamiento="",s.calc.bicie="",s.submitted="",s.k_u=!1,s.resultado=null,T=sessionStorage.getItem("flagBicie"),k=sessionStorage.getItem("flagCocheras"),$=sessionStorage.getItem("flagPozos"),E=sessionStorage.getItem("flagRejillas"),B=sessionStorage.getItem("area"),F=sessionStorage.getItem("currentInfrastructure"),O=sessionStorage.getItem("modal"),M=sessionStorage.getItem("setQuote"),_=sessionStorage.getItem("state"),J=sessionStorage.getItem("Bicie"),H.push("flagPozos","flagRejillas","flagCocheras"),f(),s.Modal=function(){return b()},s.getType=function(e){if(L=q,I=angular.element(document.getElementById(K)),L&&(I?L.removeClass("radio_active"):I.removeClass("radio_active")),K=e.infraestructura,v(K),r.info("sessionStorage not empty"),e)switch(K){case"Ciclovia":s.calculator.tipo_calle="Primaria";break;case"Ciclocarril":s.calculator.tipo_calle="Secundaria";break;case"Busbici":s.calculator.tipo_calle="Primaria"}Q=JSON.stringify(s.calculator),sessionStorage.setItem("setQuote",Q),c.go("modalidades.calculadora.formulario")},null!==M&&(s.calculator=JSON.parse(M),r.info("sessionStorage not empty")),s.getKlValue=function(e){"true"==$&&"d"===s.pozos&&(e||void 0===s.tmPozos?y():e?(s.submitted=!0,N="",s.form.PozosProyecto1=N,s.calculator.PozosProyecto=s.form.PozosProyecto1,sessionStorage.setItem("flagPozos",!0),s.flagPozos=!0):(s.emptyWKl=!0,s.submitted=!1,s.form.PozosProyecto1="")),"false"===$&&"d"===s.pozos&&y(),null===$&&"d"===s.pozos&&y(),"true"===E&&"d"===s.rejillas&&(e||void 0===s.tmRejillas?P():e?(s.submitted=!0,U="",s.form.RejillasProyecto1=U,s.calculator.RejillasProyecto=s.form.RejillasProyecto1,sessionStorage.setItem("flagRejillas",!0),s.flagRejillas=!0):(s.emptyRKl=!0,s.submitted=!1,s.form.RejillasProyecto1="")),"false"===E&&"d"===s.rejillas&&P(),null===E&&"d"===s.rejillas&&P(),"true"===k&&"d"===s.cocheras&&(e||void 0===s.tmCocheras?x():e?(s.submitted=!0,R="",s.form.CocherasProyecto1=R,s.calculator.Cocheras=s.form.CocherasProyecto1,sessionStorage.setItem("flagCocheras",!0),s.flagCocheras=!0):(s.emptyCKl=!0,s.submitted=!1,s.form.CocherasProyecto1="")),"false"===k&&"d"===s.cocheras&&x(),null===k&&"d"===s.cocheras&&x()},s.getPozos=function(e){s.emptyWKl=void 0===s.calculator.KmEvaluables?!0:!1,"d"===e&&(s.pozos=e,s.calculator.PozosProyecto="",s.tmPozos,y(),N=parseInt(1e3*s.calculator.KmEvaluables/200),s.form.PozosProyecto1=N,s.calculator.PozosProyecto=s.form.PozosProyecto1),"c"===e&&(s.pozos=e,s.calculator.PozosProyecto="",s.tmPozos?(h(s.tmPozos),sessionStorage.setItem("flagPozos",!1),s.flagPozos=!1):(s.tmPozos=s.form.PozosProyecto1,s.form.PozosProyecto1=null),s.firstPozo=function(e){h(e),sessionStorage.setItem("flagPozos",!1),s.flagPozos=!1})},s.getRejillas=function(e){s.emptyRKl=void 0===s.calculator.KmEvaluables?!0:!1,"d"===e&&(s.rejillas=e,s.calculator.RejillasProyecto="",s.tmRejillas,P(),U=parseInt(1e3*s.calculator.KmEvaluables/200),s.form.RejillasProyecto1=U,s.calculator.RejillasProyecto=s.form.RejillasProyecto1),"c"===e&&(s.rejillas=e,s.calculator.RejillasProyecto="",s.tmRejillas?(C(s.tmRejillas),sessionStorage.setItem("flagRejillas",!1),s.flagRejillas=!1):(s.tmRejillas=s.form.RejillasProyecto1,s.form.RejillasProyecto1=null),s.firstRejilla=function(e){C(e),sessionStorage.setItem("flagRejillas",!1),s.flagRejillas=!1})},s.getCocheras=function(e){s.emptyCKl=void 0===s.calculator.KmEvaluables?!0:!1,"d"===e&&(s.cocheras=e,s.calculator.Cocheras="",s.tmCocheras,x(),R=parseInt(25*s.calculator.KmEvaluables),s.form.CocherasProyecto1=R,s.calculator.Cocheras=s.form.CocherasProyecto1),"c"===e&&(s.cocheras=e,s.calculator.Cocheras="",s.tmCocheras?(z(s.tmCocheras),sessionStorage.setItem("flagCocheras",!1),s.flagCocheras=!1):(s.tmCocheras=s.form.CocherasProyecto1,s.form.CocherasProyecto1=null),s.firstCochera=function(e){z(e),sessionStorage.setItem("flagCocheras",!1),s.flagCocheras=!1})},s.getBiciE=function(e){"default"===e&&(s.biciestacionamiento=e,s.tmBicie,S(),sessionStorage.setItem("flagBicie",!0),s.flagBicie=!0),"c"===e&&(s.biciestacionamiento=e,s.firstBiciE=function(e){A(e),sessionStorage.setItem("flagBicie",!1),s.flagBicie=!1})},s.saveQuote=function(e,o){var a=sessionStorage.getItem("modal");if(e.$valid===!0){var l=JSON.stringify(o);sessionStorage.setItem("setQuote",l),a?(r.info("Sin modal"),j()):(r.warn("Lanzando Modal"),b())}else r.info("Formulario no válido"),s.calculatorForm.submitted=!0};var G=function(o){r.info("Enviando formulario"),d.sendQuote(o).then(function(o){o&&(e.scrollTop(0),sessionStorage.setItem("results",JSON.stringify(o)),c.go("modalidades.calculadora.resumen"),r.info("Ok"))},function(e){r.error("Error: "+e)})}};e.$inject=["$document","$timeout","$modal","$modalStack","$window","$scope","$location","$state","$log","$filter","SendQuote","$stateParams","$rootScope","Mun"],angular.module("emus.form",[]).controller("FormController",e)}(),function(){"use strict";function e(){var e='<input type="number" class="form-control" ng-change="getKlValue(calculator.KmEvaluables)" placeholder="ejemplo: 00.00" step="0.01" required>';return{restrict:"EA",template:e,require:"ngModel",replace:!0}}angular.module("emus.form.directives",[]).directive("kilometerField",e)}(),function(){angular.module("emus.form.factory",[]).factory("SendQuote",["$http","$q",function(e,o){return{sendQuote:function(a){var l=JSON.stringify(a),t=o.defer(),s=e({method:"POST",url:"api/index.php/estimate",data:l,headers:{"Content-Type":"application/json"}});return s.then(function(e){t.resolve(e.data.results)},function(e){t.reject(e)}),t.promise}}}])}(),function(){angular.module("emus.form.factory.mun",[]).factory("Mun",["$http","$q",function(e,o){return{getMun:function(a){var l=o.defer(),t=e.get("./components/calculator/claves/"+a+".json");return t.then(function(e){l.resolve(e.data)},function(e){l.reject(e)}),l.promise}}}])}(),function(){"use strict";var e=function(e,o,a,l,t,s,i,c,r,n){function d(){b=sessionStorage.getItem("area"),v=sessionStorage.getItem("setQuote"),f=JSON.parse(sessionStorage.getItem("estado")),h=JSON.parse(sessionStorage.getItem("municipio")),b&&(P=JSON.parse(b),s.k_u=!0,m(P.estado))}function m(e){n.getMun(e).then(function(e){s.municipios=e},function(e){c.error("Error: "+e)})}function u(){function e(e,o){y={};for(var a in e)y[a]=e[a];for(var a in o)y[a]=o[a];return y}var o=JSON.parse(sessionStorage.getItem("area")),a=JSON.parse(sessionStorage.getItem("setQuote"));return g=e(o,a),p(g)}function p(o){c.info("Enviando formulario"),r.sendQuote(o).then(function(o){o&&(e.scrollTop(0,1e3),s.own=o.options,s.result=o,i.go("modalidades.calculadora.resumen"),c.info("Ok"))},function(e){c.error("Error: "+e)})}var f,g,b,v,y,h,P;s.area=o,d(),s.estados=[{est:"Aguascalientes",cveestado:1},{est:"Baja California",cveestado:2},{est:"Baja California Sur",cveestado:3},{est:"Campeche",cveestado:4},{est:"Chiapas",cveestado:7},{est:"Chihuahua",cveestado:8},{est:"Coahuila",cveestado:5},{est:"Colima",cveestado:6},{est:"Distrito Federal",cveestado:9},{est:"Durango",cveestado:10},{est:"Guanajuato",cveestado:11},{est:"Guerrero",cveestado:12},{est:"Hidalgo",cveestado:13},{est:"Jalisco",cveestado:14},{est:"México",cveestado:15},{est:"Michoacán de Ocampo",cveestado:16},{est:"Morelos",cveestado:17},{est:"Nayarit",cveestado:18},{est:"Nuevo León",cveestado:19},{est:"Oaxaca",cveestado:20},{est:"Puebla",cveestado:21},{est:"Querétaro",cveestado:22},{est:"Quintana Roo",cveestado:23},{est:"San Luis Potosí",cveestado:24},{est:"Sinaloa",cveestado:25},{est:"Sonora",cveestado:26},{est:"Tabasco",cveestado:27},{est:"Tamaulipas",cveestado:28},{est:"Tlaxcala",cveestado:29},{est:"Veracruz",cveestado:30},{est:"Yucatán",cveestado:31},{est:"Zacatecas",cveestado:32}],s.stateChanged=function(e){s.estados.some(function(o){o.est===e&&(m(o.cveestado),f={estado:o.cveestado},sessionStorage.setItem("estado",JSON.stringify(f)))})},s.munChanged=function(e){s.municipios.some(function(o){o.mun===e&&(h={municipio:o.cvemun},sessionStorage.setItem("municipio",JSON.stringify(h)))})},s.saveArea=function(){function e(e){var o={estado:e.estado,municipio:e.municipio};o=JSON.stringify(o),sessionStorage.setItem("modal",o)}function o(e,o){y={};for(var a in e)y[a]=e[a];for(var a in o)y[a]=o[a];return y}e(s.area),g=o(f,h),P=JSON.stringify(g),sessionStorage.setItem("area",P),sessionStorage.setItem("state","true"),a.close(),null!==v&&(u(),a.close(),sessionStorage.setItem("state","true"))},s.updateArea=function(){function e(e){var o={estado:e.estado,municipio:e.municipio};o=JSON.stringify(o),sessionStorage.setItem("modal",o)}function o(e,o){y={};for(var a in e)y[a]=e[a];for(var a in o)y[a]=o[a];return y}e(s.area),g=o(f,h),P=JSON.stringify(g),sessionStorage.setItem("area",P),sessionStorage.setItem("state","true"),a.close()},s.notYet=function(){sessionStorage.setItem("state","false"),a.close("notYet")}};e.$inject=["$document","area","$modalInstance","$modal","$modalStack","$scope","$state","$log","SendQuote","Mun"],angular.module("emus.modal.controller",[]).controller("ModalController",e)}(),function(){"use strict";var e=function(e,o,a,l,t,s,i,c,r,n,d,m){function u(){y=sessionStorage.getItem("results"),g=JSON.parse(sessionStorage.getItem("modal")),h=JSON.parse(y),console.log(h),v=h.options,b=h,s.inputResult=h,y&&p(h),s.first={open:!1}}function p(e){P=e.ingresos.porcentajes,C=e.ingresos.porcentajes1000,delete P.cveestado,delete P.nomestado,delete C.cveestado,delete C.nomestado,x=e.egresos.porcentajes,z=e.egresos.porcentajes1000,delete x.cveestado,delete x.nomestado,delete z.cveestado,delete z.nomestado;AmCharts.makeChart("Ingresos",{type:"serial",theme:"light",rotate:!0,legend:{autoMargins:!1,borderAlpha:.2,equalWidths:!0,horizontalGap:10,markerSize:10,useGraphSettings:!0,valueAlign:"left",valueWidth:0},dataProvider:[{titulo:"Ingresos Promedio",im5:P.im5,im8:P.im8,im11:P.im11,im14:P.im14,im17:P.im17,im20:P.im20,im23:P.im23,im26:P.im26,im29:P.im29,im32:P.im32,im35:P.im35},{titulo:"Ingresos cada 1000 hab.",im5:C.im6,im8:C.im9,im11:C.im12,im14:C.im15,im17:C.im18,im20:C.im21,im23:C.im24,im26:C.im27,im29:C.im30,im32:C.im33,im35:C.im36}],valueAxes:[{stackType:"100%",axisAlpha:0,gridAlpha:0,labelsEnabled:!0,position:"top"}],graphs:[{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Impuestos",type:"column",valueField:"im5"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Cuotas y Aportaciones de Seguridad Social",type:"column",valueField:"im8"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Contribuciones de Mejoras",type:"column",valueField:"im11"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Derechos",type:"column",valueField:"im14"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Productos",type:"column",valueField:"im17"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Aprovechamientos",type:"column",valueField:"im20"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Participaciones federales",type:"column",valueField:"im23"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Aportaciones federales y estatales",type:"column",valueField:"im26"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Otros ingresos",type:"column",valueField:"im29"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Financiamiento",type:"column",valueField:"im32"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Disponibilidad inicial",type:"column",valueField:"im35"}],marginTop:30,marginRight:20,marginLeft:80,marginBottom:40,autoMargins:!1,categoryField:"titulo",categoryAxis:{gridPosition:"middle",axisAlpha:0,gridAlpha:0,ignoreAxisWidth:!0,autoWrap:!0},"export":{enabled:!0}}),AmCharts.makeChart("Egresos",{type:"serial",theme:"light",rotate:!0,legend:{autoMargins:!1,borderAlpha:.2,equalWidths:!0,horizontalGap:10,markerSize:10,useGraphSettings:!0,valueAlign:"left",valueWidth:0},dataProvider:[{titulo:"Egresos Promedio",em4:x.em4,em7:x.em7,em10:x.em10,em13:x.em13,em16:x.em16,em19:x.em19,em22:x.em22,em25:x.em25,em28:x.em28,em31:x.em31},{titulo:"Egresos cada 1000 hab.",em4:z.em5,em7:z.em8,em10:z.em11,em13:z.em14,em16:z.em17,em19:z.em20,em22:z.em23,em25:z.em26,em28:z.em29,em31:z.em32}],valueAxes:[{stackType:"100%",axisAlpha:0,gridAlpha:0,labelsEnabled:!0,position:"top"}],graphs:[{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Impuestos",type:"column",valueField:"em4"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Cuotas y Aportaciones de Seguridad Social",type:"column",valueField:"em7"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Contribuciones de Mejoras",type:"column",valueField:"em10"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Derechos",type:"column",valueField:"em13"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Productos",type:"column",valueField:"em16"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Aprovechamientos",type:"column",valueField:"em19"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Participaciones federales",type:"column",valueField:"em22"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Aportaciones federales y estatales",type:"column",valueField:"em25"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Otros ingresos",type:"column",valueField:"em28"},{balloonText:"[[title]], [[category]]<br><span style='font-size:14px;'><b>[[value]]</b> ([[percents]]%)</span>",fillAlphas:.9,fillColorsField:"color",fontSize:11,labelText:"[[percents]]%",lineAlpha:.5,title:"Financiamiento",type:"column",valueField:"em31"}],marginTop:30,marginRight:20,marginLeft:80,marginBottom:40,autoMargins:!1,categoryField:"titulo",categoryAxis:{gridPosition:"middle",axisAlpha:0,gridAlpha:0,ignoreAxisWidth:!0,autoWrap:!0}})}function f(e){var o=0;for(var a in e)e.hasOwnProperty(a)&&(o+=parseFloat(e[a]));return o}var g,b,v,y,h,P,C,x,z;u(),"ObraCompl_Completa"===v.ObraComp&&(s.ObraComp="Pintura en cruces peatonales, bolardos, banqueta y guías táctiles."),"ObraCompl_Semi"===v.ObraComp&&(s.ObraComp="Sólo pintura en cruces peatonales y bolardos."),"ObraCompl_Basica"===v.ObraComp&&(s.ObraComp="Sólo pintura en cruces peatonales."),"BacheoSuperficial"===v.TipoDeBacheo&&(s.TipoDeBacheo="Bacheo superficial"),"Slurry"===v.TipoDeBacheo&&(s.TipoDeBacheo="Bacheo tipo slurry"),"BacheoProfundo"===v.TipoDeBacheo&&(s.TipoDeBacheo="Bacheo profundo"),"BacheoPromedio"===v.TipoDeBacheo&&(s.TipoDeBacheo="Bacheo promedio"),"MinSenalHor"===v.senalizacion&&(s.senalizacion="Los mínimos requeridos (señalización horizontal)"),"MaxSenalHor"===v.senalizacion&&(s.senalizacion="Señalización completa (señalización horizontal, señalización vertical)"),s.MantenimientoAnual="SinMantAnual"===v.MantenimientoAnual?"Sin mantenimiento anual":"Con mantenimiento anual",s.infraestructura=v.infraestructura,s.tipo_calle=v.tipo_calle,s.KmEvaluables=v.KmEvaluables,s.Anchoefectivo=v.Anchoefectivo,s.Sentidos=v.Sentidos,s.AnchoCalle=v.AnchoCalle,s.IntersSemaf=v.IntersSemaf,s.IntersTotales=v.IntersTotales,s.PozosProyecto=v.PozosProyecto,s.RejillasProyecto=v.RejillasProyecto,s.Cocheras=v.Cocheras,s.Biciestacionamientos=v.Biciestacionamientos,s.modalidad="Calles",s.area=g.municipio?g.estado+" - "+g.municipio:g.estado,delete b.egresos,delete b.ingresos,delete b.options,b.horizontal=b.senalizacion.horizontal,b.vertical=b.senalizacion.vertical,b.seleccionada=b.senalizacion.seleccionada,delete b.senalizacion,s.total=f(b),s.createPdf=function(){var e=new jsPDF("p","pt","a4");e.addHTML(document.body,function(){e.save("demo.pdf")})}};e.$inject=["$document","$timeout","$modal","$modalStack","$window","$scope","$location","$state","$log","$filter","$stateParams","$rootScope"],angular.module("emus.summary",[]).controller("SummaryController",e)}(),function(){angular.module("emus.modality.factory",[]).factory("ModalityFactory",["$http","$q",function(e,o){return{getModality:function(a){var l=o.defer(),t=e.get("http://52.8.65.73/emus-itdp/api/index.php/modalidades/"+a);return t.then(function(e){l.resolve(e.data.results[0])},function(e){l.reject(e)}),l.promise}}}])}(),function(){"use strict";var e=function(e,o,a,l,t,s,i,c){var r=l.tipo;s.startAnimating(),c.getModality(r).then(function(e){s.stopAnimating(),i(function(){e.proyectos===!1&&(o.mensaje=!1),o.set_m=e},1e3)},function(o){e.error(o)})};e.$inject=["$log","$scope","$rootScope","$stateParams","$state","$activityIndicator","$timeout","ModalityFactory"],angular.module("emus.modalities.type",[]).controller("ModalityTypeController",e)}(),function(){"use strict";function e(e){var o;return{restrict:"A",scope:{closeId:"=hideDescription"},link:function(e,a){a.bind("click",function(){o=angular.element(document.getElementById(e.closeId)),o.removeClass("more")})}}}e.$inject=["$log"],angular.module("emus.modality.hide.directive",[]).directive("hideDescription",e)}(),function(){"use strict";function e(e){var o,a;return{restrict:"A",scope:{id:"=moreDescription"},link:function(e,l,t){l.bind("click",function(){a=o,o=angular.element(document.getElementById(e.id)),angular.equals(a,o)?[a="",o.addClass("more")]:o.addClass("more"),a&&(o?a.removeClass("more"):[o.removeClass("more"),o=""])})}}}e.$inject=["$log"],angular.module("emus.modality.more.directive",[]).directive("moreDescription",e)}(),angular.module("emus").run(["$templateCache",function(e){e.put("components/about/about.html",'<section class=about-container><header id=header><div class=container><div class=about-icon id=menu><i class=emus-menu></i></div><div class=about-logo><a href="#/"><img ng-src=./images/logo_itdp_30.png></a></div><nav class=about-menu><ul><li><a class=item href="#/">Inicio</a></li><li><a class="item active">Acerca de</a></li></ul></nav></div></header><section class=about><section class=container><article class=breadcrumb><div ncy-breadcrumb></div></article><article class=modality-header><h1>{{title}}</h1></article></section></section><section class=about-body><section class=row><article class="col-xs-12 col-sm-offset-1 col-sm-10 col-md-offset-2 col-md-8"><p>La <strong>Hoja de Ruta de proyectos de movilidad urbana sustentable</strong> es un esfuerzo conjunto entre la <a href="http://www.sedatu.gob.mx/sraweb/" target=_blank>SEDATU</a> e <a href="http://mexico.itdp.org/" target=_blank>ITDP México</a>, con apoyo del Fondo para la Prosperidad de la Embajada de Reino Unido en México, para apoyar la planeación, diseño, implementación y evaluación de proyectos de movilidad urbana sustentable.</p><p>La Hoja de Ruta contempla las cinco modalidades de la Estrategia de Movilidad Urbana Sustentable de la <a href="http://www.sedatu.gob.mx/sraweb/" target=_blank>SEDATU</a>:</p><ol><li>Calles.</li><li>Sistemas Integrados de Transporte.</li><li>Gestión de la demanda.</li><li>Gestión de la distribución de mercancías.</li><li>Desarrollo Orientado al Transporte.</li></ol><p>Asimismo, la Hoja de Ruta pretende asesorar a tomadores de decisiones y ciudadanos en general en los distintas fases involucradas en el desarrollo de proyectos de movilidad urbana sustentable:</p><ul><li>Planeación.</li><li>Diseño.</li><li>Implementación.</li><li>Evaluación.</li></ul><p>De esta forma, la Hoja de Ruta funciona mediante una matriz que guía de manera fácil y clara el desarrollo de los proyectos según su tipo y sus distintas fases.</p><p>La Hoja de Ruta contempla una <strong>“Calculadora de Costos”</strong> en algunas de las modalidades, a fin de estimar de una forma rápida cuál es el costo total y unitario de ciertos proyectos. Esta herramienta puede ser de gran utilidad tanto para funcionarios y funcionarias de gobiernos locales interesados en la implementación de proyectos de movilidad urbana, así como para ciudadanos en general que interesados en temas de transparencia.</p></article></section></section><section class=logos><article class="col-xs-12 col-sm-4 col-md-4 col-lg-4 text-center"><img src=./images/logo_itdp_30.png></article><article class="col-xs-12 col-sm-4 col-md-4 col-lg-4 text-center"><img src=./images/logo_embajada_britanica.png></article><article class="col-xs-12 col-sm-4 col-md-4 col-lg-4 text-center"><img src=./images/logo_sedatu.png></article></section><footer class=footer><section class=footer-left><ul><li><a href=https://twitter.com/ITDPmx target=_blank><i class=emus-twitter></i></a></li><li><a href=https://www.facebook.com/itdpmx target=_blank><i class=emus-facebook></i></a></li><li><a href target=_blank><i class=emus-google></i></a></li></ul></section><section class=footer-right><p><a rel=license href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Licencia Creative Commons" style=border-width:0 src=https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png></a></p></section></footer></section>'),e.put("components/calculator/calculator.html",'<section class=calculator-container><section class="calculator container"><section class=calculator-description></section><section class=calculator-form><article><form name=calculatorForm novalidate><div ui-view></div></form></article></section></section></section>'),
e.put("components/landing/landing.html",'<section class=landing-container id=start><header id=header><div class=container><div class=landing-icon id=menu><i class=emus-menu></i></div><div class=langind-logo><a href="#/"><img ng-src=./images/logo_itdp_30.png></a></div><nav class=landing-menu><ul><li><a class="item active" href=#start>Inicio</a></li><li><a class=item ui-sref=acerca>Acerca de</a></li></ul></nav></div></header><section class="titles text-center"><section class=row style="margin: 0;"><article class=col-lg-12><h1>HOJA DE RUTA DE PROYECTOS DE MOVILIDAD URBANA SUSTENTABLE</h1><h2>La Hoja de Ruta es una plataforma en línea desarrollada por la Secretaría de Desarrollo Agrario, Territorial y Urbano (SEDATU) en colaboración con ITDP México para apoyar la planeación, diseño, implementación y evaluación de proyectos de movilidad urbana sustentable.</h2><hr></article></section><div href=#platform du-smooth-scroll du-scrollspy offset=65 style="display: inline-block;cursor: pointer;"><i class=emus-down-arrow></i></div></section><section class=platform id=platform><section class=container><section class="row p-matrix"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><article><h1>Estructura de la Hoja de Ruta</h1><h4>Matriz de procedimientos</h4><p>La plataforma está organizada de acuerdo a las distintas modalidades de la Estrategia de Movilidad Urbana Sustentable y los diferentes pasos que se requieren para el desarrollo de proyectos. Da click para comenzar a explorar la Hoja de Ruta.</p><button class="btn btn-lg btn-landing1">EXPLORAR</button></article></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><figure><img src=./images/matriz.png alt=Matriz></figure></div></section><section class="row p-modalities"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><article><h1>Calculadora de Costos</h1><h4>Modalidades de la Estrategia de Movilidad Urbana Sustentable</h4><p>Selecciona la modalidad de la EMUS que te interese y descubre el tipo de proyecto que se puede desarrollar, así como su costo estimado.</p><button class="btn btn-lg btn-landing1" ui-sref=modalidades>EXPLORAR</button></article></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><figure><img ng-src=./images/modalidades.png alt=Modalidades></figure></div></section></section></section><section class=who id=who><section class=container><h1 class=text-center>¿A quién está dirigida la Hoja de Ruta?</h1><section class=row><article class="col-xs-12 col-sm-6 col-md-6 col-lg-6"><section class="who-header text-center"><div class=row><div class="col-xs-12 col-sm-4 col-md 4 col-lg-4"><i class=emus-user></i></div><div class="col-xs-12 col-sm-8 col-md 8 col-lg-8"><h1>Sociedad civil</h1></div></div></section><section class=who-body><ul><li><i class=emus-right-arrow></i><p>Ciudadanos y ciudadanas interesados en temas de movilidad urbana sustentable.</p></li><li><i class=emus-right-arrow></i><p>Grupos y/o colectivos que busquen desarrollar proyectos ciudadanos de movilidad.</p></li><li><i class=emus-right-arrow></i><p>Público en general preocupado por temas de transparencia y uso de datos.</p></li></ul></section></article><article class="col-xs-12 col-sm-6 col-md-6 col-lg-6"><section class="who-header text-center"><div class=row><div class="col-xs-12 col-sm-4 col-md 4 col-lg-4"><i class=emus-user></i></div><div class="col-xs-12 col-sm-8 col-md 8 col-lg-8"><h1>Gobierno</h1></div></div></section><section class=who-body><ul><li><i class=emus-right-arrow></i><p>Funcionarios públicos de nivel local con interés en el desarrollo de proyectos de movilidad urbana sustentable.</p></li></ul></section></article></section></section></section><section class=logos><article class="col-xs-12 col-sm-4 col-md-4 col-lg-4 text-center"><img src=./images/logo_itdp_30.png></article><article class="col-xs-12 col-sm-4 col-md-4 col-lg-4 text-center"><img src=./images/logo_embajada_britanica.png></article><article class="col-xs-12 col-sm-4 col-md-4 col-lg-4 text-center"><img src=./images/logo_sedatu.png></article></section><footer class=footer><section class=footer-left><ul><li><a href=https://twitter.com/ITDPmx target=_blank><i class=emus-twitter></i></a></li><li><a href=https://www.facebook.com/itdpmx target=_blank><i class=emus-facebook></i></a></li><li><a href target=_blank><i class=emus-google></i></a></li></ul></section><section class=footer-right><p><a rel=license href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Licencia Creative Commons" style=border-width:0 src=https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png></a></p></section></footer></section>'),e.put("components/modalities/modalities.html",'<section class=modality><header id=header><div class=container><div class=landing-icon id=menu><i class=emus-menu></i></div><div class=langind-logo><a href="#/"><img src=./images/logo_itdp_30.png></a></div><nav class=landing-menu><ul><li><a class=item href=#start>Inicio</a></li><li><a class=item href=#about>Acerca de</a></li></ul></nav></div></header><section class=modality-container><section class=container><article class=breadcrumb><div ncy-breadcrumb></div></article><article class=modality-header><h1>{{title}}</h1><ul ng-if=showModalities()><li><button class="btn btn-mod1" ui-sref-active=active ui-sref="modalidades.tipo({tipo:\'1\'})">CALLES</button></li><li><button class="btn btn-mod2" ui-sref-active=active ui-sref="modalidades.tipo({tipo: \'2\'})">SISTEMAS INTEGRADOS DE TRANSPORTE</button></li><li><button class="btn btn-mod3" ui-sref-active=active ui-sref="modalidades.tipo({tipo: \'3\'})">DESARROLLO ORIENTADO AL TRANSPORTE</button></li><li><button class="btn btn-mod4" ui-sref-active=active ui-sref="modalidades.tipo({tipo: \'4\'})">GESTIÓN DE LA DEMANDA</button></li><li><button class="btn btn-mod5" ui-sref-active=active ui-sref="modalidades.tipo({tipo: \'5\'})">CARGA URBANA</button></li></ul></article></section></section><section class=Quote ui-view><section class=modality-description><section class="card-description container"><p>La EMUS incluye cinco modalidades, cada una de ellas con distinto tipo de proyectos. En conjunto, las 5 modalidades permiten implementar una estrategia integral encaminada a mejorar los sistemas de transporte urbano y gestionar de manera efectiva el uso de los vehículos privados. Al dar click en cada modalidad podrás encontrar el tipo de proyectos que puede ser implementado cada caso, así como una guía técnica que brinda orientación en todas las fases del proyecto (planeación, diseño, implementación y evaluación).</p></section></section></section><section class=logos><article class="col-xs-12 col-sm-4 col-md-4 col-lg-4 text-center"><img src=./images/logo_itdp_30.png></article><article class="col-xs-12 col-sm-4 col-md-4 col-lg-4 text-center"><img src=./images/logo_embajada_britanica.png></article><article class="col-xs-12 col-sm-4 col-md-4 col-lg-4 text-center"><img src=./images/logo_sedatu.png></article></section><footer class=footer><section class=footer-left><ul><li><a href=https://twitter.com/ITDPmx target=_blank><i class=emus-twitter></i></a></li><li><a href=https://www.facebook.com/itdpmx target=_blank><i class=emus-facebook></i></a></li><li><a href target=_blank><i class=emus-google></i></a></li></ul></section><section class=footer-right><p><a rel=license href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Licencia Creative Commons" style=border-width:0 src=https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png></a></p></section></footer></section>'),e.put("components/calculator/form/form.html",'<button class="area btn btn-default btn-area" id=area ng-if=!showModalities() tooltip=Cambiar tooltip-placement=top tooltip-animation=true ng-click=Modal()><i class=emus-marker></i><span>{{area.estado ? area.estado : "Área no definida"}}</span> <span>{{area.municipio ? area.municipio : ""}}</span></button><div class="row calculator-form-c"><section class="calculator-question col-xs-12 col-sm-12 col-md-offset-1 col-md-10 col-lg-offset-1 col-lg-10"><small style="padding: 10px 0;display: block;color:rgba(65, 76, 90, 0.65);">*Todos los campos son requeridos</small><div class="row calculator-form-row"><section class=calculator-project><p>¿Qué infraestructura quieres cotizar?</p><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"><input type=radio id=ciclovia ng-model=calculator.infraestructura name=ciclovia value=Ciclovia class=radio ng-change=getType(calculator) required><article><figcaption>Ciclovia</figcaption><figure><label for=ciclovia><img src=./images/ciclovia.jpg style="width: 100%;" id=Ciclovia></label></figure></article></div><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"><input type=radio id=ciclocarril ng-model=calculator.infraestructura name=ciclocarril value=Ciclocarril class=radio ng-change=getType(calculator) required><article><figcaption>Ciclocarril</figcaption><figure><label for=ciclocarril><img src=./images/ciclocarril.jpg style="width: 100%;" id=Ciclocarril></label></figure></article></div><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"><input type=radio id=busbici ng-model=calculator.infraestructura name=busbici value=Busbici class=radio ng-change=getType(calculator) required><article><figcaption>Bus-bici</figcaption><figure><label for=busbici><img src=./images/busbici.jpg style="width: 100%;" id=Busbici></label></figure></article></div></section></div><div class="row calculator-form-row"><div class=form-group><div class="col-xs-12 col-sm-5 col-md-5 col-lg-4"><label>Tipo de calle</label></div><div class="col-xs-12 col-sm-6 col-md-7 col-lg-8"><label class=label-field for=1sentido><small>{{calculator.tipo_calle ? calculator.tipo_calle : "Seleccione una infraestructura"}}</small></label></div></div></div><div class="row calculator-form-row"><div class=form-group><div class="col-xs-12 col-sm-5 col-md-5 col-lg-4"><label>Ingresa los kilómetros de infraestructura a cotizar</label></div><div class="col-xs-12 col-sm-6 col-md-7 col-lg-8"><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 input"><input type=number class=form-control ng-change=getKlValue(calculator.KmEvaluables) placeholder="ejemplo: 00.00" step=0.01 required name=kilometros ng-pattern="/^\\d{0,1}(\\d\\.\\d)?\\d?$/" ng-model=calculator.KmEvaluables> <label>Km</label> <span class="btn btn-danger" ng-if="calculatorForm.kilometros.$error.pattern || calculatorForm.submitted" style=display:block;>No es un número válido !</span></div></div></div></div><div class="row calculator-form-row"><div class=form-group><div class="col-xs-12 col-sm-5 col-md-5 col-lg-4"><label>Ancho de carril ciclista por sentido</label></div><div class="col-xs-12 col-sm-6 col-md-7 col-lg-8"><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 input"><input type=number class=form-control name=ancho placeholder="ejemplo: 00.00" ng-pattern="/^\\d{0,1}(\\d\\.\\d)?\\d?$/" step=0.01 ng-model=calculator.Anchoefectivo required> <label>mts.</label> <span class="btn btn-danger" ng-if="calculatorForm.ancho.$error.pattern || calculatorForm.submitted" style=display:block;>No es un número válido !</span></div></div></div></div><div class="row calculator-form-row"><div class=form-group><div class="col-xs-12 col-sm-5 col-md-5 col-lg-4"><label>¿Cuántos sentidos tendrá?</label></div><div class="col-xs-12 col-sm-7 col-md-7 col-lg-8"><ul><li class=item-option><input type=radio value=1 id=1sentido name=sentido class=radio ng-model=calculator.Sentidos required> <label class=label-field for=1sentido><small>1 sentido</small></label></li><li class=item-option><input type=radio value=2 id=2sentidos name=sentido class=radio ng-model=calculator.Sentidos required> <label class=label-field for=2sentidos><small>2 sentidos</small></label></li></ul></div></div></div><div class="row calculator-form-row"><div class=form-group><div class="col-xs-12 col-sm-5 col-md-5 col-lg-4"><label>¿Cuánto mide la sección de la calle (arroyo vehicular)?</label></div><div class="col-xs-12 col-sm-6 col-md-7 col-lg-8"><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 input"><input type=number class=form-control name=seccion_arroyo placeholder="ejemplo: 00.00" ng-model=calculator.AnchoCalle ng-pattern="/^\\d{0,1}(\\d\\.\\d)?\\d?$/" step=0.01 required> <label>mts.</label> <span class="btn btn-danger" ng-if="calculatorForm.seccion_arroyo.$error.pattern || calculatorForm.submitted" style=display:block;>No es un número válido !</span></div></div></div></div><div class="row calculator-form-row"><div class=form-group><div class="col-xs-12 col-sm-5 col-md-5 col-lg-4"><label>Número de intersecciones semaforizadas</label></div><div class="col-xs-12 col-sm-6 col-md-7 col-lg-8"><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6"><input type=number class=form-control name=IntersSemaf placeholder="ejemplo: 00" ng-pattern="/^[0-9]{1,2}$/" ng-model=calculator.IntersSemaf required> <span class="btn btn-danger" ng-if="calculatorForm.IntersSemaf.$error.pattern || calculatorForm.submitted" style=display:block;>No es un número válido !</span></div></div></div></div><div class="row calculator-form-row"><div class=form-group><div class="col-xs-12 col-sm-5 col-md-5 col-lg-4"><label>Número de intersecciones totales</label></div><div class="col-xs-12 col-sm-6 col-md-7 col-lg-8"><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6"><input type=number class=form-control name=IntersTotales placeholder="ejemplo: 00" ng-pattern="/^[0-9]{1,2}$/" ng-model=calculator.IntersTotales required> <span class="btn btn-danger" ng-if="calculatorForm.IntersTotales.$error.pattern || calculatorForm.submitted" style=display:block;>No es un número válido !</span></div></div></div></div><div class="row calculator-form-row"><div class=form-group><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"><label>Nivel de bacheo a utilizar</label></div><div class="col-xs-12 col-sm-8 col-md-8 col-lg-8"><ul><li class=item-option><input type=radio value=Slurry id=slurry name=nivel class=radio ng-model=calculator.TipoDeBacheo required> <label class=label-field for=slurry><small>Slurry</small></label></li><li class=item-option><input type=radio value=BacheoSuperficial id=superficial name=nivel class=radio ng-model=calculator.TipoDeBacheo required> <label class=label-field for=superficial><small>Superficial</small></label></li><li class=item-option><input type=radio value=BacheoProfundo id=profundo name=nivel class=radio ng-model=calculator.TipoDeBacheo required> <label class=label-field for=profundo><small>Profundo</small></label></li><li class=item-option><input type=radio value=BacheoPromedio id=promedio name=nivel class=radio ng-model=calculator.TipoDeBacheo required> <label class=label-field for=promedio><small>Promedio</small></label></li></ul></div></div></div><div class="row calculator-form-row"><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"><label>Número de pozos de drenaje</label></div><div class="col-xs-12 col-sm-8 col-md-8 col-lg-8"><ul><li class=item-option><input type=radio id=PozosProyecto class=radio name=PozosProyecto value=d ng-model=pozos ng-change=getPozos(pozos) ng-checked="flagPozos == true" required> <label class=label-field for=PozosProyecto><small>Cálculo predeterminado</small><a href class=emus-help style=color:#414C5A;text-decoration:none; tooltip="Cada 4 calles" tooltip-trigger=focus tooltip-placement=top tooltip-animation=true></a></label><div><input type=number class=form-control ng-pattern="/^[0-9]{1,7}$/" ng-model=form.PozosProyecto1 disabled style="top: 15px;position: relative;"> <span class="btn btn-danger ng-hide" ng-show="calculatorForm.kilometros.$error.pattern || calculatorForm.kilometros.$error.required && emptyWKl && pozos === \'d\'" style="position: relative;top: 15px;white-space: normal;">El campo "kilómetros de infraestructura a cotizar" esta vacío o no es válido</span></div></li><li class=item-option style="display: inline-flex;display: -webkit-inline-flex;"><input type=radio id=otro-pozo class=radio name=PozosProyecto value=c ng-model=pozos ng-change=getPozos(pozos) ng-checked="flagPozos == false" required> <label class=label-field for=otro-pozo><small>Otro</small></label><div><input type=number id=otro class=form-control name=Pozos placeholder=número ng-pattern="/^\\d{0,1}?\\d?$/" ng-model=form.PozosProyecto2 ng-change=firstPozo(form.PozosProyecto2) ng-disabled="pozos === \'d\'" ng-required="pozos === \'c\'"> <span class="btn btn-danger" ng-if=calculatorForm.Pozos.$error.pattern style=display:block;>No es un número válido !</span></div></li></ul></div></div><div class="row calculator-form-row"><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"><label>Número de rejillas</label></div><div class="col-xs-12 col-sm-8 col-md-8 col-lg-8"><ul><li class=item-option><input type=radio id=RejillasProyecto class=radio name=RejillasProyecto value=d ng-model=rejillas ng-change=getRejillas(rejillas) ng-checked="flagRejillas == true" required> <label class=label-field for=RejillasProyecto><small>Cálculo predeterminado</small><a href class=emus-help style=color:#414C5A;text-decoration:none; tooltip="Cada 4 calles" tooltip-trigger=focus tooltip-placement=top tooltip-animation=true></a></label> <input type=number class=form-control ng-pattern="/^[0-9]{1,7}$/" ng-model=form.RejillasProyecto1 disabled style="top: 15px;position: relative;"> <span class="btn btn-danger ng-hide" ng-show="calculatorForm.kilometros.$error.pattern || calculatorForm.kilometros.$error.required && emptyRKl && rejillas === \'d\'" style="position: relative;top: 15px;white-space: normal;">El campo "kilómetros de infraestructura a cotizar" esta vacío o no es válido</span></li><li class=item-option style="display: inline-flex;display: -webkit-inline-flex;"><input type=radio id=otra-rejilla class=radio name=RejillasProyecto value=c ng-model=rejillas ng-change=getRejillas(rejillas) ng-checked="flagRejillas == false" required> <label class=label-field for=otra-rejilla><small>Otro</small></label><div><input type=number id=otra class=form-control name=Rejillas placeholder=número ng-pattern="/^[0-9]{1,2}$/" ng-model=form.RejillasProyecto2 ng-change=firstRejilla(form.RejillasProyecto2) ng-disabled="rejillas === \'d\'" ng-required="rejillas === \'c\'"> <span class="btn btn-danger" ng-if=calculatorForm.Rejillas.$error.pattern style=display:block;>No es un número válido !</span></div></li></ul></div></div><div class="row calculator-form-row"><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"><label>Cocheras a lo largo del trayecto</label></div><div class="col-xs-12 col-sm-8 col-md-8 col-lg-8"><ul><li class=item-option><input type=radio id=CocherasProyecto class=radio name=CocherasProyecto value=d ng-model=cocheras ng-change=getCocheras(cocheras) ng-checked="flagCocheras == true" required> <label class=label-field for=CocherasProyecto><small>Cálculo predeterminado</small><a href class=emus-help style=color:#414C5A;text-decoration:none; tooltip="Cada 4 calles" tooltip-trigger=focus tooltip-placement=top tooltip-animation=true></a></label> <input type=number class=form-control ng-pattern="/^[0-9]{1,7}$/" ng-model=form.CocherasProyecto1 disabled style="top: 15px;position: relative;"> <span class="btn btn-danger ng-hide" ng-show="calculatorForm.kilometros.$error.pattern || calculatorForm.kilometros.$error.required && emptyCKl && cocheras === \'d\'" style="position: relative;top: 15px;white-space: normal;">El campo "kilómetros de infraestructura a cotizar" esta vacío o no es válido</span></li><li class=item-option style="display: inline-flex;display: -webkit-inline-flex;"><input type=radio id=otra-cochera class=radio name=CocherasProyecto value=c ng-model=cocheras ng-change=getCocheras(cocheras) ng-checked="flagCocheras == false" required> <label class=label-field for=otra-cochera><small>Otro</small></label><div><input type=number id=otra class=form-control name=Cocheras placeholder=número ng-pattern="/^[0-9]{1,2}$/" ng-model=form.CocherasProyecto2 ng-change=firstCochera(form.CocherasProyecto2) ng-disabled="cocheras === \'d\'" ng-required="cocheras === \'c\'"> <span class="btn btn-danger" ng-if=calculatorForm.Cocheras.$error.pattern style=display:block;>No es un número válido !</span></div></li></ul></div></div><div class="row calculator-form-row"><div class=form-group><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"><label>¿Cuántos biciestacionamientos habrá en el proyecto?</label></div><div class="col-xs-12 col-sm-8 col-md-8 col-lg-8"><ul><li class=item-option><input type=radio id=default-bicie name=biciestacionamientos class=radio value=default ng-model=biciestacionamiento ng-change=getBiciE(biciestacionamiento) ng-checked="flagBicie == true" required> <label class=label-field for=default-bicie><small>Por default</small><a href title class=emus-help style=color:#414C5A;text-decoration:none; tooltip="Bloque de 4 cada 300m" tooltip-trigger=focus tooltip-placement=top tooltip-animation=true></a></label></li><li class=item-option style="display: inline-flex;display: -webkit-inline-flex;"><input type=radio id=custom-bicie class=radio name=biciestacionamientos value=c ng-model=biciestacionamiento ng-change=getBiciE(biciestacionamiento) ng-checked="flagBicie === false" required> <label class=label-field for=custom-bicie><small>Otro</small></label><div><input type=number class=form-control name=BiciE placeholder="ejemplo: 00" ng-pattern="/^[0-9]{1,2}$/" ng-model=calc.bicie ng-change=firstBiciE(calc.bicie) ng-disabled="biciestacionamiento === \'default\'" ng-required="biciestacionamiento === \'c\'"> <span class="btn btn-danger" ng-if=calculatorForm.BiciE.$error.pattern style=display:block;>No es un número válido !</span></div></li></ul></div></div></div><div class="row calculator-form-row"><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"><label>Señalización durante el trayecto</label></div><div class="col-xs-12 col-sm-8 col-md-8 col-lg-8"><ul><li class=item-option><input type=radio value=MinSenalHor id=señalizacion-minima name=señalizacion class=radio ng-model=calculator.senalizacion required> <label class=label-field for=señalizacion-minima><small>Los mínimos requeridos (señalización horizontal)</small></label></li><li class=item-option><input type=radio value=MaxSenalHor id=señalizacion-completa name=señalizacion class=radio ng-model=calculator.senalizacion required> <label class=label-field for=señalizacion-completa><small>Señalización completa (señalización horizontal, señalización vertical)</small></label></li></ul></div></div><div class="row calculator-form-row"><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"><label>Obra complementaria a la infraestructura</label></div><div class="col-xs-12 col-sm-8 col-md-8 col-lg-8"><ul><li class=item-option><input type=radio value=ObraCompl_Completa id=compl-completa name=complementaria class=radio ng-model=calculator.ObraComp required> <label class=label-field for=compl-completa><small>Pintura en cruces peatonales, bolardos, banqueta y guías táctiles.</small></label></li><li class=item-option><input type=radio value=ObraCompl_Semi id=compl-semi name=complementaria class=radio ng-model=calculator.ObraComp required> <label class=label-field for=compl-semi><small>Sólo pintura en cruces peatonales y bolardos.</small></label></li><li class=item-option><input type=radio value=ObraCompl_Basica id=compl-basica name=complementaria class=radio ng-model=calculator.ObraComp required> <label class=label-field for=compl-basica><small>Sólo pintura en cruces peatonales.</small></label></li></ul></div></div><div class="row calculator-form-row"><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"><label>¿Quieres añadir al costo el mantenimiento anual?</label></div><div class="col-xs-12 col-sm-8 col-md-8 col-lg-8"><ul><li class=item-option><input type=radio value=ConMantAnual id=anadir-manto name=mantenimiento class=radio ng-model=calculator.MantenimientoAnual required> <label class=label-field for=anadir-manto><small>Si, añadir.</small></label></li><li class=item-option><input type=radio value=SinMantAnual id=no-anadir name=mantenimiento class=radio ng-model=calculator.MantenimientoAnual required> <label class=label-field for=no-anadir><small>No, cotizar sin mantenimiento anual.</small></label></li></ul></div></div><button class="btn btn-lg btn-success" ng-disabled="calculatorForm.$invalid || calculatorForm.submitted" ng-click="saveQuote(calculatorForm, calculator)">COTIZAR</button> <span class="btn btn-danger novalid" ng-if="calculatorForm.$invalid && calculatorForm.submitted">Hay campos no válidos o sin llenar</span></section></div>'),e.put("components/calculator/modal/modal.html",'<section class=modal-header><h3 class=modal-title>Escoge tu Estado y municipio!</h3></section><section class=modal-body><article class=row><div class="col-lg-6 col-md-6 col-sm-6 col-xs-12"><ul class=nya-bs-select data-size=10 title=Estado ng-model=area.estado ng-change=stateChanged(area.estado)><li nya-bs-option="est in estados" data-value=est.est class=nya-bs-option><a>{{est.est}}</a></li></ul></div><div class="col-lg-6 col-md-6 col-sm-6 col-xs-12"><ul class=nya-bs-select data-size=10 title=Municipio ng-model=area.municipio ng-change=munChanged(area.municipio)><li nya-bs-option="mun in municipios" data-value=mun.mun class=nya-bs-option><a>{{mun.mun}}</a></li></ul></div></article></section><section class=modal-footer><button class="btn btn-g-success" type=button ng-if="k_u !== true" ng-disabled=!area ng-click=saveArea()>ACEPTAR</button> <button class="btn btn-g-info" type=button ng-if="k_u !== true" ng-click=notYet()>MÁS ADELANTE</button> <button class="btn btn-g-success" type=button ng-if="k_u == true" ng-click=updateArea()>ACTUALIZAR</button> <button class="btn btn-g-danger" type=button ng-if="k_u == true" ng-click=$close(result)>CANCELAR</button></section>'),e.put("components/calculator/summary/summary.html",'<section class="summary row"><section class="col-lg-offset-1 col-lg-10"><article class=s1><div class=summary-header><h4>RESUMEN COTIZACIÓN</h4></div><div class=s1-body><div class="col-xs-12 content"><div class=content-summary><div class=content-item><img ng-src="./images/{{infraestructura | lowercase}}.jpg" alt></div><div class=content-item><h4>{{total | currency}}</h4><span>TOTAL</span></div><div class=content-item><h4>{{modalidad}}</h4><span>MODALIDAD</span><h4>Infraestructura ciclista</h4><span>TIPO</span></div><div class=content-item><h4>{{infraestructura}}</h4><span>PROYECTO</span><h4>{{area}}</h4><span>LUGAR</span></div></div></div></div></article><article class=s3 style="margin-top: 5px;"><div class=summary-header style=background-color:rgba(65,76,90,0.75);color:#ffffff;><h4 style=color:#ffffff;>Costos</h4></div><div class=row style=margin:0;background-color:#ffffff;><div class="col-xs-12 col-sm-offset-2 col-sm-8"><table><tbody><tr><td>Area de Infraestructura</td><td>{{inputResult.areaInfraestructura | currency}}</td></tr><tr><td>Obras viales de bacheo</td><td>{{inputResult.bacheo | currency}}</td></tr><tr><td>Biciestacionamientos</td><td>{{inputResult.biciestacionamientos | currency}}</td></tr><tr><td>Delimitación de la Infraestructura</td><td>{{inputResult.delimitacionInfraestructura | currency}}</td></tr><tr><td>Infraestructura complementaria</td><td>{{inputResult.infraestructuraComplementaria | currency}}</td></tr><tr><td>Intersecciones semaforizadas</td><td>{{inputResult.interseccionesSemaforizadas | currency}}</td></tr><tr><td>Señalización <small style="margin-left: 15px;display: block;font-size: 15px;" ng-if="inputResult.horizontal && inputResult.vertical">Señalización horizontal</small> <small style="margin-left: 15px;display: block;font-size: 15px;" ng-if="inputResult.horizontal && inputResult.vertical">Señalización vertical</small></td><td>{{inputResult.seleccionada | currency}} <small style="margin-left: 15px;display: block;font-size: 15px;" ng-if="inputResult.horizontal && inputResult.vertical">{{inputResult.horizontal | currency}}</small> <small style="margin-left: 15px;display: block;font-size: 15px;" ng-if="inputResult.horizontal && inputResult.vertical">{{inputResult.vertical | currency}}</small></td></tr></tbody></table></div></div></article><article class=s2 style="margin-top: 5px;"><div class=summary-header style=background-color:rgba(65,76,90,0.75);color:#ffffff;><h4 style=color:#ffffff;>Comparativa</h4></div><div class=s2-body><section class=row><article class=col-xs-12><div class=summary-header><h4 style="color:#414C5A;font-weight: 400;">Ingresos</h4></div><div id=Ingresos style="width:100%;height: 500px;font-size:11px;"></div></article><br><article class=col-xs-12><div class=summary-header><h4 style="color:#414C5A;font-weight: 400;">Egresos</h4></div><div id=Egresos style="width:100%;height: 500px;font-size:11px;"></div></article></section></div></article><article class=s3 style="margin-top: 5px;"><div class=summary-header style=background-color:rgba(65,76,90,0.75);color:#ffffff;><h4 style=color:#ffffff;>Datos ingresados</h4></div><div class=s3-body><section class=row><div class="content-left col-xs-12 col-sm-6"><div class=col-xs-12><table><tbody><tr><td>Infraestructura</td><td>{{infraestructura}}</td></tr><tr><td>Tipo de calle</td><td>{{tipo_calle}}</td></tr><tr><td>Kilómetros</td><td>{{KmEvaluables}}</td></tr><tr><td>Ancho efectivo de la infraestructura</td><td>{{Anchoefectivo}}</td></tr><tr><td>Sentidos</td><td>{{Sentidos}}</td></tr><tr><td>Sección de calle (arroyo vehicular)</td><td>{{AnchoCalle}}</td></tr><tr><td>Intersecciones semaforizadas</td><td>{{IntersSemaf}}</td></tr><tr><td>Intersecciones totales</td><td>{{IntersTotales}}</td></tr></tbody></table></div></div><div class="content-right col-xs-12 col-sm-6"><div class=col-xs-12><table><tbody><tr><td>Nivel de bacheo</td><td>{{TipoDeBacheo}}</td></tr><tr><td>Pozos de drenaje</td><td>{{PozosProyecto}}</td></tr><tr><td>Rejillas</td><td>{{RejillasProyecto}}</td></tr><tr><td>Cocheras</td><td>{{Cocheras}}</td></tr><tr><td>Biciestacionamientos</td><td>{{Biciestacionamientos}}</td></tr><tr><td>Señalización</td><td>{{senalizacion}}</td></tr><tr><td>Obra complementaria</td><td>{{ObraComp}}</td></tr><tr><td>Mantenimiento anual</td><td>{{MantenimientoAnual}}</td></tr></tbody></table></div></div><div class=summary-action><button class="btn btn-success" ui-sref=modalidades.calculadora.formulario>Cambiar Datos</button> <button class="btn btn-success" ng-click=createPdf()>Descargar PDF</button></div></section></div></article></section></section>'),e.put("components/modalities/type/template.html",'<div style="position:absolute;top:0;left:50%;display: block;top:30px;"><div ng-activity-indicator=CircledDark class=center></div></div><section class=modalities-type ng-if=!AILoading><section class=container><section class=card-description><h2>{{set_m.nombre}}</h2><p>{{set_m.descripcion}}</p></section><section class=row><div deckgrid class="deckgrid column-1-3 col-xs-12" source=set_m.proyectos><article class=card ng-show="card.estatus === \'Activo\'"><div class=card-image><img ng-src=http://52.8.65.73/emus-itdp/admin/assets/uploads/files/{{card.imagen_url}}></div><div class=card-body><h3>{{card.nombre}}</h3><i class=emus-more more-description=card.id_proyecto></i></div><div id={{card.id_proyecto}} class=card-sdescription><h3>{{card.nombre}}</h3><p>{{card.descripcion}}</p><i class=emus-close hide-description=card.id_proyecto></i></div><div class=card-action><button ng-show="card.calculadora === \'Activo\'" class="btn btn-{{mother.set_m.clase}}" ui-sref=modalidades.calculadora.formulario>{{card.calculadora}}</button></div></article></div></section></section></section>')}]);